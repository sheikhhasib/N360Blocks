(()=>{"use strict";var e,t={455:()=>{const e=window.wp.blocks,t=window.React,o=window.wp.i18n,l=window.wp.blockEditor,a=window.wp.components,n=({data:e,setAttributes:o})=>{const[l,a]=(0,t.useState)(""),n=(s=e.video_url)?s.includes("youtube.com")||s.includes("youtu.be")?"youtube":s.includes("vimeo.com")?"vimeo":s.includes("facebook.com")?"facebook":null:null;var s;return(0,t.useEffect)((()=>{if("youtube"===n){const t=e.video_url.split("v=")[1]?.split("&")[0]||e.video_url.split("youtu.be/")[1]?.split("?")[0],o=`https://i.ytimg.com/vi/${t}/maxresdefault.jpg`,l=`https://i.ytimg.com/vi/${t}/hqdefault.jpg`;fetch(o).then((e=>{e.ok?a(o):a(l)})).catch((()=>{a(l)}))}else a(((e,t)=>"youtube"===t?`https://i.ytimg.com/vi/${e.split("v=")[1]?.split("&")[0]||e.split("youtu.be/")[1]?.split("?")[0]}/maxresdefault.jpg`:"vimeo"===t?`https://vumbnail.com/${e.split("vimeo.com/")[1]}_large.jpg`:"")(e.video_url,n));o({video_provider:n})}),[e.video_url,n]),(0,t.createElement)("div",{class:"N360Blocks__video"},l&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("img",{className:`N360Blocks__thumbnail ${e.ratio||""}`,src:l,alt:"Video Thumbnail"}),(0,t.createElement)("div",{className:"N360Blocks__controls"},(0,t.createElement)("div",{className:"N360Blocks__controls-group"},(0,t.createElement)("button",{type:"button",className:"N360Blocks__controls-btn"},(0,t.createElement)("span",{className:"dashicons dashicons-controls-back"})),(0,t.createElement)("button",{type:"button",className:"N360Blocks__controls-btn N360Blocks__controls-btn--play"},(0,t.createElement)("span",{className:"dashicons dashicons-controls-play"})),(0,t.createElement)("button",{type:"button",className:"N360Blocks__controls-btn"},(0,t.createElement)("span",{className:"dashicons dashicons-controls-forward"}))),(0,t.createElement)("div",{className:"N360Blocks__progress"},(0,t.createElement)("input",{type:"range",className:"N360Blocks__progress-bar",defaultValue:0,min:"0",max:"100",step:"0.1"})),(0,t.createElement)("div",{className:"N360Blocks__volume"},(0,t.createElement)("button",{type:"button",className:"N360Blocks__controls-btn"},(0,t.createElement)("span",{className:"dashicons dashicons-controls-volumeon"})),(0,t.createElement)("input",{type:"range",className:"N360Blocks__volume-slider",defaultValue:80,min:"0",max:"100",step:"1"})))),"youtube"!=n&&"vimeo"!=n&&(0,t.createElement)("div",{class:"N360Blocks__error"},"Unsupported video URL"))},s=({label:e,options:o,selected:l,updateOption:n,name:s})=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.__experimentalToggleGroupControl,{label:e,value:l,isBlock:!0,onChange:e=>{n(s?{[s]:e}:e)}},Object.entries(o).map((([e,o])=>(0,t.createElement)(a.__experimentalToggleGroupControlOption,{value:e,label:o,key:e})))));(0,e.registerBlockType)("vp/video",{edit:function({attributes:e,setAttributes:r,clientId:c}){const{video_provider:i,video_url:p,autoplay:u,loop:m,controls:d,ratio:v,block_id:_}=e,b=(0,l.useBlockProps)();return _!==c&&r({block_id:c}),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,o.__)("N360Blocks Video","vp"),initialOpen:!0},(0,t.createElement)(a.TextControl,{label:(0,o.__)("Enter Video URL","vp"),value:p||"",placeholder:(0,o.__)("Paste video URL","vp"),onChange:e=>r({video_url:e})})),(0,t.createElement)(a.PanelBody,{title:(0,o.__)("Video Settings","vp"),initialOpen:!0},(0,t.createElement)(s,{label:(0,o.__)("Aspect Ratio","vp"),options:{"ratio-16-9":"16:9","ratio-4-3":"4:3","ratio-9-16":"9:16","ratio-3-4":"3:4","ratio-1-1":"1:1"},selected:v,name:"ratio",updateOption:r}),(0,t.createElement)(a.ToggleControl,{label:(0,o.__)("Controls","vp"),checked:d,onChange:e=>r({controls:e})}),(0,t.createElement)(a.ToggleControl,{label:(0,o.__)("Autoplay Video","vp"),checked:u,onChange:e=>r({autoplay:e})}),(0,t.createElement)(a.ToggleControl,{label:(0,o.__)("Loop Video","vp"),checked:m,onChange:e=>r({loop:e})}))),(0,t.createElement)("section",{...b},(0,t.createElement)("div",{className:"w-video-block"},(0,t.createElement)(n,{data:e,setAttributes:r}))))},save:function(e){const o=l.useBlockProps.save();return(0,t.createElement)("section",{...o})}})}},o={};function l(e){var a=o[e];if(void 0!==a)return a.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,l),n.exports}l.m=t,e=[],l.O=(t,o,a,n)=>{if(!o){var s=1/0;for(p=0;p<e.length;p++){for(var[o,a,n]=e[p],r=!0,c=0;c<o.length;c++)(!1&n||s>=n)&&Object.keys(l.O).every((e=>l.O[e](o[c])))?o.splice(c--,1):(r=!1,n<s&&(s=n));if(r){e.splice(p--,1);var i=a();void 0!==i&&(t=i)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[o,a,n]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={564:0,268:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var a,n,[s,r,c]=o,i=0;if(s.some((t=>0!==e[t]))){for(a in r)l.o(r,a)&&(l.m[a]=r[a]);if(c)var p=c(l)}for(t&&t(o);i<s.length;i++)n=s[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(p)},o=globalThis.webpackChunkvp_blocks=globalThis.webpackChunkvp_blocks||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=l.O(void 0,[268],(()=>l(455)));a=l.O(a)})();